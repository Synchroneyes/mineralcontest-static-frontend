import{a as j,V as z}from"./VRow-DDGD2PrQ.js";import{V as w,a as B,d as G,c as T,b as D}from"./VCard-cyYrkiSt.js";import{p as I,C as O,D as J,r as V,ar as K,aj as M,T as X,Q as H,R as x,b as o,aF as Y,at as Z,al as ee,v as ae,A as te,a8 as oe,P as ne,am as le,ay as re,H as se,E as ie,N as U,a6 as ue,d as $,o as Q,a as p,g as y,F as C,i as P,c as h,w as i,e as ce,h as g,t as L,j as A,a3 as de,_ as me,b9 as fe,aH as pe,V as ve}from"./index-B-AnKxHY.js";import{m as ge,u as _e,V as F}from"./VOverlay-DpkrdmUG.js";import{V as be,f as he}from"./forwardRefs-BRGATtOx.js";import{a as Ve,V as ye}from"./VContainer-DLe9O4u1.js";const ke=I({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ge({origin:"center center",scrollStrategy:"block",transition:{component:be},zIndex:2400})},"VDialog"),Ee=O()({name:"VDialog",props:ke(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,l){let{emit:t,slots:r}=l;const m=J(e,"modelValue"),{scopeId:_}=_e(),s=V();function b(a){var d,v;const u=a.relatedTarget,n=a.target;if(u!==n&&((d=s.value)!=null&&d.contentEl)&&((v=s.value)!=null&&v.globalTop)&&![document,s.value.contentEl].includes(n)&&!s.value.contentEl.contains(n)){const f=Z(s.value.contentEl);if(!f.length)return;const E=f[0],q=f[f.length-1];u===E?q.focus():E.focus()}}K&&M(()=>m.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",b):document.removeEventListener("focusin",b)},{immediate:!0});function k(){var a;t("afterEnter"),(a=s.value)!=null&&a.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function c(){t("afterLeave")}return M(m,async a=>{var u;a||(await X(),(u=s.value.activatorEl)==null||u.focus({preventScroll:!0}))}),H(()=>{const a=F.filterProps(e),u=x({"aria-haspopup":"dialog"},e.activatorProps),n=x({tabindex:-1},e.contentProps);return o(F,x({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:m.value,"onUpdate:modelValue":d=>m.value=d,"aria-modal":"true",activatorProps:u,contentProps:n,role:"dialog",onAfterEnter:k,onAfterLeave:c},_),{activator:r.activator,default:function(){for(var d=arguments.length,v=new Array(d),f=0;f<d;f++)v[f]=arguments[f];return o(Y,{root:"VDialog"},{default:()=>{var E;return[(E=r.default)==null?void 0:E.call(r,...v)]}})}})}),he({},s)}}),Ce={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Le(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return o("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[l])}function R(e){const[l,t]=e.split("@");return Array.from({length:t}).map(()=>S(l))}function S(e){let l=[];if(!e)return l;const t=Ce[e];if(e!==t){if(e.includes(","))return N(e);if(e.includes("@"))return R(e);t.includes(",")?l=N(t):t.includes("@")?l=R(t):t&&l.push(S(t))}return[Le(e,l)]}function N(e){return e.replace(/\s/g,"").split(",").map(S)}const xe=I({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...ee(),...ae(),...te()},"VSkeletonLoader"),W=O()({name:"VSkeletonLoader",props:xe(),setup(e,l){let{slots:t}=l;const{backgroundColorClasses:r,backgroundColorStyles:m}=oe(ne(e,"color")),{dimensionStyles:_}=le(e),{elevationClasses:s}=re(e),{themeClasses:b}=se(e),{t:k}=ie(),c=U(()=>S(ue(e.type).join(",")));return H(()=>{var n;const a=!t.default||e.loading,u=e.boilerplate||!a?{}:{ariaLive:"polite",ariaLabel:k(e.loadingText),role:"alert"};return o("div",x({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},b.value,r.value,s.value],style:[m.value,a?_.value:{}]},u),[a?c.value:(n=t.default)==null?void 0:n.call(t)])}),{}}}),Pe=$({__name:"MapsComponent",props:{maps:{type:Array,default:()=>[]}},setup(e){const l=e,t=U(()=>{const c=[...l.maps].sort((n,d)=>n.map_name.localeCompare(d.map_name)),a=3,u=[];for(let n=0;n<c.length;n+=a)u.push(c.slice(n,n+a));return u}),r=V(!1),m=V(""),_=c=>{m.value=c,r.value=!0},s=V({}),b=(c,a)=>{s.value[`${c}-${a}`]=!1},k=(c,a)=>{s.value[`${c}-${a}`]=!1,console.error(`Image failed to load at row ${c}, col ${a}`)};return Q(()=>{t.value.forEach((c,a)=>{c.forEach((u,n)=>{s.value[`${a}-${n}`]=!0})})}),(c,a)=>(p(),y(C,null,[(p(!0),y(C,null,P(t.value,(u,n)=>(p(),h(z,{key:n},{default:i(()=>[(p(!0),y(C,null,P(u,(d,v)=>(p(),h(j,{key:v,cols:"4"},{default:i(()=>[o(w,null,{default:i(()=>[s.value[`${n}-${v}`]?(p(),h(W,{key:0,type:"image",height:"200px"})):(p(),h(ce,{key:1,src:d.map_thumbnail,height:"200px",onLoad:f=>b(n,v),onError:f=>k(n,v)},null,8,["src","onLoad","onError"])),o(B,null,{default:i(()=>[g(L(d.map_name),1)]),_:2},1024),o(G,{class:"hover-pointer",onClick:f=>_(d.map_description)},{default:i(()=>[g(L(d.map_description),1)]),_:2},1032,["onClick"]),o(T,null,{default:i(()=>[g("Taille: "+L(d.map_size_display),1)]),_:2},1024),o(D,{class:"justify-center"},{default:i(()=>[o(A,{href:d.map_url,target:"_blank",color:"primary"},{default:i(()=>[o(de,null,{default:i(()=>a[2]||(a[2]=[g("mdi-download")])),_:1}),a[3]||(a[3]=g("Télécharger "))]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128)),o(Ee,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=u=>r.value=u),"max-width":"600"},{default:i(()=>[o(w,null,{default:i(()=>[o(B,null,{default:i(()=>a[4]||(a[4]=[g("Description de la carte")])),_:1}),o(T,null,{default:i(()=>[g(L(m.value),1)]),_:1}),o(D,null,{default:i(()=>[o(A,{color:"primary",onClick:a[0]||(a[0]=u=>r.value=!1)},{default:i(()=>a[5]||(a[5]=[g("Fermer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),$e=me(Pe,[["__scopeId","data-v-7fa2b0d2"]]),Se={key:0},we=$({__name:"MapsLoading",props:{enabled:{type:Boolean,default:!1}},setup(e){return(l,t)=>e.enabled?(p(),y("div",Se,[(p(),y(C,null,P(4,r=>o(z,{key:r},{default:i(()=>[(p(),y(C,null,P(3,m=>o(j,{key:m,cols:"4"},{default:i(()=>[o(W,{type:"image, list-item-two-line",height:"300",loading:!0})]),_:2},1024)),64))]),_:2},1024)),64))])):fe("",!0)}}),Be=$({__name:"MapsList",setup(e){const l=V(!0),t=V([]);return Q(async()=>{try{const r=await Ve.getMapsList();t.value=r.data,console.log(pe(t.value))}catch(r){console.error("Failed to fetch maps:",r)}finally{l.value=!1}console.log(t.value)}),(r,m)=>{const _=we,s=$e;return p(),h(ye,null,{default:i(()=>[o(ve,null,{default:i(()=>[o(_,{enabled:l.value},null,8,["enabled"]),o(s,{maps:t.value},null,8,["maps"])]),_:1})]),_:1})}}}),Ne=$({__name:"maps",setup(e){return(l,t)=>{const r=Be;return p(),h(r)}}});export{Ne as default};
