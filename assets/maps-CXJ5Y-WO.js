import{a as j,V as z}from"./VRow-Bw7ZxMnX.js";import{V as w,a as B,b as K,e as T,d as D}from"./VCard-BHDZiGQH.js";import{q as I,bg as J,a$ as Q,E as O,G as X,bh as Y,r as y,at as Z,al as M,W as ee,S as U,h as A,T as x,e as n,aH as ae,aU as te,av as ne,an as oe,y as le,C as re,aa as se,R as ie,ao as ue,aA as ce,K as de,H as fe,P as H,a8 as me,d as P,o as W,b as p,i as V,F as C,k as $,c as h,w as i,f as pe,j as g,t as L,l as R,a5 as ve,_ as ge,bi as _e,bf as be,V as he}from"./index-B9tuA6Fq.js";import{a as ye,V as Ve}from"./VContainer-B41ItEn7.js";const ke=I({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...J({origin:"center center",scrollStrategy:"block",transition:{component:Q},zIndex:2400})},"VDialog"),Ee=O()({name:"VDialog",props:ke(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,l){let{emit:t,slots:r}=l;const f=X(e,"modelValue"),{scopeId:_}=Y(),s=y();function b(a){var d,v;const u=a.relatedTarget,o=a.target;if(u!==o&&((d=s.value)!=null&&d.contentEl)&&((v=s.value)!=null&&v.globalTop)&&![document,s.value.contentEl].includes(o)&&!s.value.contentEl.contains(o)){const m=ne(s.value.contentEl);if(!m.length)return;const E=m[0],G=m[m.length-1];u===E?G.focus():E.focus()}}Z&&M(()=>f.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",b):document.removeEventListener("focusin",b)},{immediate:!0});function k(){var a;t("afterEnter"),(a=s.value)!=null&&a.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function c(){t("afterLeave")}return M(f,async a=>{var u;a||(await ee(),(u=s.value.activatorEl)==null||u.focus({preventScroll:!0}))}),U(()=>{const a=A.filterProps(e),u=x({"aria-haspopup":"dialog"},e.activatorProps),o=x({tabindex:-1},e.contentProps);return n(A,x({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:f.value,"onUpdate:modelValue":d=>f.value=d,"aria-modal":"true",activatorProps:u,contentProps:o,role:"dialog",onAfterEnter:k,onAfterLeave:c},_),{activator:r.activator,default:function(){for(var d=arguments.length,v=new Array(d),m=0;m<d;m++)v[m]=arguments[m];return n(ae,{root:"VDialog"},{default:()=>{var E;return[(E=r.default)==null?void 0:E.call(r,...v)]}})}})}),te({},s)}}),Ce={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Le(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[l])}function F(e){const[l,t]=e.split("@");return Array.from({length:t}).map(()=>S(l))}function S(e){let l=[];if(!e)return l;const t=Ce[e];if(e!==t){if(e.includes(","))return N(e);if(e.includes("@"))return F(e);t.includes(",")?l=N(t):t.includes("@")?l=F(t):t&&l.push(S(t))}return[Le(e,l)]}function N(e){return e.replace(/\s/g,"").split(",").map(S)}const xe=I({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...oe(),...le(),...re()},"VSkeletonLoader"),q=O()({name:"VSkeletonLoader",props:xe(),setup(e,l){let{slots:t}=l;const{backgroundColorClasses:r,backgroundColorStyles:f}=se(ie(e,"color")),{dimensionStyles:_}=ue(e),{elevationClasses:s}=ce(e),{themeClasses:b}=de(e),{t:k}=fe(),c=H(()=>S(me(e.type).join(",")));return U(()=>{var o;const a=!t.default||e.loading,u=e.boilerplate||!a?{}:{ariaLive:"polite",ariaLabel:k(e.loadingText),role:"alert"};return n("div",x({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},b.value,r.value,s.value],style:[f.value,a?_.value:{}]},u),[a?c.value:(o=t.default)==null?void 0:o.call(t)])}),{}}}),$e=P({__name:"MapsComponent",props:{maps:{type:Array,default:()=>[]}},setup(e){const l=e,t=H(()=>{const c=[...l.maps].sort((o,d)=>o.map_name.localeCompare(d.map_name)),a=3,u=[];for(let o=0;o<c.length;o+=a)u.push(c.slice(o,o+a));return u}),r=y(!1),f=y(""),_=c=>{f.value=c,r.value=!0},s=y({}),b=(c,a)=>{s.value[`${c}-${a}`]=!1},k=(c,a)=>{s.value[`${c}-${a}`]=!1,console.error(`Image failed to load at row ${c}, col ${a}`)};return W(()=>{t.value.forEach((c,a)=>{c.forEach((u,o)=>{s.value[`${a}-${o}`]=!0})})}),(c,a)=>(p(),V(C,null,[(p(!0),V(C,null,$(t.value,(u,o)=>(p(),h(z,{key:o},{default:i(()=>[(p(!0),V(C,null,$(u,(d,v)=>(p(),h(j,{key:v,cols:"4"},{default:i(()=>[n(w,null,{default:i(()=>[s.value[`${o}-${v}`]?(p(),h(q,{key:0,type:"image",height:"200px"})):(p(),h(pe,{key:1,src:d.map_thumbnail,height:"200px",onLoad:m=>b(o,v),onError:m=>k(o,v)},null,8,["src","onLoad","onError"])),n(B,null,{default:i(()=>[g(L(d.map_name),1)]),_:2},1024),n(K,{class:"hover-pointer",onClick:m=>_(d.map_description)},{default:i(()=>[g(L(d.map_description),1)]),_:2},1032,["onClick"]),n(T,null,{default:i(()=>[g("Taille: "+L(d.map_size_display),1)]),_:2},1024),n(D,{class:"justify-center"},{default:i(()=>[n(R,{href:d.map_url,target:"_blank",color:"primary"},{default:i(()=>[n(ve,null,{default:i(()=>a[2]||(a[2]=[g("mdi-download")])),_:1}),a[3]||(a[3]=g("Télécharger "))]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128)),n(Ee,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=u=>r.value=u),"max-width":"600"},{default:i(()=>[n(w,null,{default:i(()=>[n(B,null,{default:i(()=>a[4]||(a[4]=[g("Description de la carte")])),_:1}),n(T,null,{default:i(()=>[g(L(f.value),1)]),_:1}),n(D,null,{default:i(()=>[n(R,{color:"primary",onClick:a[0]||(a[0]=u=>r.value=!1)},{default:i(()=>a[5]||(a[5]=[g("Fermer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Pe=ge($e,[["__scopeId","data-v-7fa2b0d2"]]),Se={key:0},we=P({__name:"MapsLoading",props:{enabled:{type:Boolean,default:!1}},setup(e){return(l,t)=>e.enabled?(p(),V("div",Se,[(p(),V(C,null,$(4,r=>n(z,{key:r},{default:i(()=>[(p(),V(C,null,$(3,f=>n(j,{key:f,cols:"4"},{default:i(()=>[n(q,{type:"image, list-item-two-line",height:"300",loading:!0})]),_:2},1024)),64))]),_:2},1024)),64))])):_e("",!0)}}),Be=P({__name:"MapsList",setup(e){const l=y(!0),t=y([]);return W(async()=>{try{const r=await ye.getMapsList();t.value=r.data,console.log(be(t.value))}catch(r){console.error("Failed to fetch maps:",r)}finally{l.value=!1}console.log(t.value)}),(r,f)=>{const _=we,s=Pe;return p(),h(Ve,null,{default:i(()=>[n(he,null,{default:i(()=>[n(_,{enabled:l.value},null,8,["enabled"]),n(s,{maps:t.value},null,8,["maps"])]),_:1})]),_:1})}}}),Re=P({__name:"maps",setup(e){return(l,t)=>{const r=Be;return p(),h(r)}}});export{Re as default};
