import{a as T,V as D}from"./VRow-DhelwK3c.js";import{V as B,b as M,a as U,e as L,d as A}from"./VCard-DC0H1LAJ.js";import{q as j,bf as Q,a$ as X,E as O,G as Y,bg as Z,r as y,at as ee,al as F,W as ae,S as H,h as R,T as w,e as t,aH as te,aU as ne,av as oe,an as le,y as re,C as se,aa as ie,R as ue,ao as de,aA as ce,K as fe,H as me,P as W,a8 as pe,d as $,o as q,b as v,i as V,F as x,k as P,c as h,w as o,f as ve,j as m,t as C,g as G,l as N,a5 as ge,_ as _e,bh as be,V as he}from"./index-JQuslIP4.js";import{a as ye,V as Ve}from"./VContainer-CnIetVSj.js";import{d as ke}from"./github-Gu2vBQF3.js";const Ee=j({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Q({origin:"center center",scrollStrategy:"block",transition:{component:X},zIndex:2400})},"VDialog"),Ce=O()({name:"VDialog",props:Ee(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,s){let{emit:n,slots:i}=s;const r=Y(e,"modelValue"),{scopeId:_}=Z(),u=y();function b(a){var c,g;const d=a.relatedTarget,l=a.target;if(d!==l&&((c=u.value)!=null&&c.contentEl)&&((g=u.value)!=null&&g.globalTop)&&![document,u.value.contentEl].includes(l)&&!u.value.contentEl.contains(l)){const p=oe(u.value.contentEl);if(!p.length)return;const E=p[0],J=p[p.length-1];d===E?J.focus():E.focus()}}ee&&F(()=>r.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",b):document.removeEventListener("focusin",b)},{immediate:!0});function k(){var a;n("afterEnter"),(a=u.value)!=null&&a.contentEl&&!u.value.contentEl.contains(document.activeElement)&&u.value.contentEl.focus({preventScroll:!0})}function f(){n("afterLeave")}return F(r,async a=>{var d;a||(await ae(),(d=u.value.activatorEl)==null||d.focus({preventScroll:!0}))}),H(()=>{const a=R.filterProps(e),d=w({"aria-haspopup":"dialog"},e.activatorProps),l=w({tabindex:-1},e.contentProps);return t(R,w({ref:u,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:r.value,"onUpdate:modelValue":c=>r.value=c,"aria-modal":"true",activatorProps:d,contentProps:l,role:"dialog",onAfterEnter:k,onAfterLeave:f},_),{activator:i.activator,default:function(){for(var c=arguments.length,g=new Array(c),p=0;p<c;p++)g[p]=arguments[p];return t(te,{root:"VDialog"},{default:()=>{var E;return[(E=i.default)==null?void 0:E.call(i,...g)]}})}})}),ne({},u)}}),xe={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Le(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[s])}function z(e){const[s,n]=e.split("@");return Array.from({length:n}).map(()=>S(s))}function S(e){let s=[];if(!e)return s;const n=xe[e];if(e!==n){if(e.includes(","))return I(e);if(e.includes("@"))return z(e);n.includes(",")?s=I(n):n.includes("@")?s=z(n):n&&s.push(S(n))}return[Le(e,s)]}function I(e){return e.replace(/\s/g,"").split(",").map(S)}const we=j({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...le(),...re(),...se()},"VSkeletonLoader"),K=O()({name:"VSkeletonLoader",props:we(),setup(e,s){let{slots:n}=s;const{backgroundColorClasses:i,backgroundColorStyles:r}=ie(ue(e,"color")),{dimensionStyles:_}=de(e),{elevationClasses:u}=ce(e),{themeClasses:b}=fe(e),{t:k}=me(),f=W(()=>S(pe(e.type).join(",")));return H(()=>{var l;const a=!n.default||e.loading,d=e.boilerplate||!a?{}:{ariaLive:"polite",ariaLabel:k(e.loadingText),role:"alert"};return t("div",w({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},b.value,i.value,u.value],style:[r.value,a?_.value:{}]},d),[a?f.value:(l=n.default)==null?void 0:l.call(n)])}),{}}}),Pe=$({__name:"MapsComponent",props:{maps:{type:Array,default:()=>[]}},setup(e){const s=e,n=W(()=>{const f=[...s.maps].sort((l,c)=>l.map_name.localeCompare(c.map_name)),a=3,d=[];for(let l=0;l<f.length;l+=a)d.push(f.slice(l,l+a));return d}),i=y(!1),r=y(""),_=f=>{r.value=f,i.value=!0},u=y({}),b=(f,a)=>{u.value[`${f}-${a}`]=!1},k=(f,a)=>{u.value[`${f}-${a}`]=!1,console.error(`Image failed to load at row ${f}, col ${a}`)};return q(()=>{n.value.forEach((f,a)=>{f.forEach((d,l)=>{u.value[`${a}-${l}`]=!0})})}),(f,a)=>(v(),V(x,null,[(v(!0),V(x,null,P(n.value,(d,l)=>(v(),h(D,{key:l},{default:o(()=>[(v(!0),V(x,null,P(d,(c,g)=>(v(),h(T,{key:g,cols:"4"},{default:o(()=>[t(B,null,{default:o(()=>[u.value[`${l}-${g}`]?(v(),h(K,{key:0,type:"image",height:"200px"})):(v(),h(ve,{key:1,src:c.map_thumbnail,height:"200px",onLoad:p=>b(l,g),onError:p=>k(l,g)},null,8,["src","onLoad","onError"])),t(M,null,{default:o(()=>[m(C(c.map_name),1)]),_:2},1024),t(U,{class:"hover-pointer",onClick:p=>_(c.map_description)},{default:o(()=>[m(C(c.map_description),1)]),_:2},1032,["onClick"]),t(L,null,{default:o(()=>[m("Taille: "+C(c.map_size_display)+" ",1),a[2]||(a[2]=G("br",null,null,-1)),m(" Nombre de téléchargements: "+C(c.download_count),1)]),_:2},1024),t(L),t(A,{class:"justify-center"},{default:o(()=>[t(N,{href:c.map_url,target:"_blank",color:"primary"},{default:o(()=>[t(ge,null,{default:o(()=>a[3]||(a[3]=[m("mdi-download")])),_:1}),a[4]||(a[4]=m("Télécharger "))]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128)),t(Ce,{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=d=>i.value=d),"max-width":"600"},{default:o(()=>[t(B,null,{default:o(()=>[t(M,null,{default:o(()=>a[5]||(a[5]=[m("Description de la carte")])),_:1}),t(L,null,{default:o(()=>[m(C(r.value),1)]),_:1}),t(A,null,{default:o(()=>[t(N,{color:"primary",onClick:a[0]||(a[0]=d=>i.value=!1)},{default:o(()=>a[6]||(a[6]=[m("Fermer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),$e=_e(Pe,[["__scopeId","data-v-2d639824"]]),Se={key:0},Be=$({__name:"MapsLoading",props:{enabled:{type:Boolean,default:!1}},setup(e){return(s,n)=>e.enabled?(v(),V("div",Se,[(v(),V(x,null,P(4,i=>t(D,{key:i},{default:o(()=>[(v(),V(x,null,P(3,r=>t(T,{key:r,cols:"4"},{default:o(()=>[t(K,{type:"image, list-item-two-line",height:"300",loading:!0})]),_:2},1024)),64))]),_:2},1024)),64))])):be("",!0)}}),Me=$({__name:"MapsList",setup(e){const s=y(!0),n=y([]);return q(async()=>{try{const i=await ye.getMapsList();n.value=i.data,n.value.forEach(async r=>{r.download_count=await ke(r.map_folder_name)})}catch(i){console.error("Failed to fetch maps:",i)}finally{s.value=!1}}),(i,r)=>{const _=Be,u=$e;return v(),h(Ve,null,{default:o(()=>[t(he,null,{default:o(()=>[t(D,null,{default:o(()=>[t(T,{cols:"12"},{default:o(()=>[t(B,null,{default:o(()=>[t(M,null,{default:o(()=>r[0]||(r[0]=[m("Maps")])),_:1}),t(U,{class:"display-2"},{default:o(()=>r[1]||(r[1]=[m("Instructions")])),_:1}),t(L,{class:"display-2"},{default:o(()=>r[2]||(r[2]=[m("Pour installer une carte, il suffit de télécharger la carte souhaité. Une fois effectué, il faut extraire l'archive dans le dossier plugins/MineralContest/worlds/ de votre serveur. Vous devriez alors voir un nouveau dossier, ayant comme prefix "),G("b",null,"mc_",-1),m(" et en redémarrant votre serveur, vous selectionner votre carte dans le menu de vote! ")])),_:1})]),_:1})]),_:1})]),_:1}),t(_,{enabled:s.value},null,8,["enabled"]),t(u,{maps:n.value},null,8,["maps"])]),_:1})]),_:1})}}}),Ne=$({__name:"maps",setup(e){return(s,n)=>{const i=Me;return v(),h(i)}}});export{Ne as default};
