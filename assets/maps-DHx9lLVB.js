import{a as I,V as N}from"./VRow-DESrTTkN.js";import{V as w,a as B,d as q,c as D,b as T}from"./VCard-uetW4NQ8.js";import{p as O,D as j,E as H,r as V,as as K,ak as M,U as X,R as U,S as x,e as o,aG as Y,au as Z,am as ee,x as ae,B as te,a9 as oe,Q as ne,an as le,az as re,J as se,G as ie,O as G,a7 as ue,d as $,o as J,b as p,h as k,F as C,j as S,c as h,w as i,f as ce,i as g,t as L,k as A,a4 as de,_ as me,ba as fe,aI as pe,V as ve}from"./index-Df9c3N-4.js";import{m as ge,u as _e,V as R}from"./VOverlay-B4ex5olz.js";import{V as be,f as he}from"./forwardRefs-BaJh08_h.js";import{a as Ve,V as ke}from"./VContainer-CUpfhiiP.js";const ye=O({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ge({origin:"center center",scrollStrategy:"block",transition:{component:be},zIndex:2400})},"VDialog"),Ee=j()({name:"VDialog",props:ye(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,l){let{emit:t,slots:r}=l;const m=H(e,"modelValue"),{scopeId:_}=_e(),s=V();function b(a){var d,v;const u=a.relatedTarget,n=a.target;if(u!==n&&((d=s.value)!=null&&d.contentEl)&&((v=s.value)!=null&&v.globalTop)&&![document,s.value.contentEl].includes(n)&&!s.value.contentEl.contains(n)){const f=Z(s.value.contentEl);if(!f.length)return;const E=f[0],W=f[f.length-1];u===E?W.focus():E.focus()}}K&&M(()=>m.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",b):document.removeEventListener("focusin",b)},{immediate:!0});function y(){var a;t("afterEnter"),(a=s.value)!=null&&a.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function c(){t("afterLeave")}return M(m,async a=>{var u;a||(await X(),(u=s.value.activatorEl)==null||u.focus({preventScroll:!0}))}),U(()=>{const a=R.filterProps(e),u=x({"aria-haspopup":"dialog"},e.activatorProps),n=x({tabindex:-1},e.contentProps);return o(R,x({ref:s,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:m.value,"onUpdate:modelValue":d=>m.value=d,"aria-modal":"true",activatorProps:u,contentProps:n,role:"dialog",onAfterEnter:y,onAfterLeave:c},_),{activator:r.activator,default:function(){for(var d=arguments.length,v=new Array(d),f=0;f<d;f++)v[f]=arguments[f];return o(Y,{root:"VDialog"},{default:()=>{var E;return[(E=r.default)==null?void 0:E.call(r,...v)]}})}})}),he({},s)}}),Ce={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Le(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return o("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[l])}function F(e){const[l,t]=e.split("@");return Array.from({length:t}).map(()=>P(l))}function P(e){let l=[];if(!e)return l;const t=Ce[e];if(e!==t){if(e.includes(","))return z(e);if(e.includes("@"))return F(e);t.includes(",")?l=z(t):t.includes("@")?l=F(t):t&&l.push(P(t))}return[Le(e,l)]}function z(e){return e.replace(/\s/g,"").split(",").map(P)}const xe=O({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...ee(),...ae(),...te()},"VSkeletonLoader"),Q=j()({name:"VSkeletonLoader",props:xe(),setup(e,l){let{slots:t}=l;const{backgroundColorClasses:r,backgroundColorStyles:m}=oe(ne(e,"color")),{dimensionStyles:_}=le(e),{elevationClasses:s}=re(e),{themeClasses:b}=se(e),{t:y}=ie(),c=G(()=>P(ue(e.type).join(",")));return U(()=>{var n;const a=!t.default||e.loading,u=e.boilerplate||!a?{}:{ariaLive:"polite",ariaLabel:y(e.loadingText),role:"alert"};return o("div",x({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},b.value,r.value,s.value],style:[m.value,a?_.value:{}]},u),[a?c.value:(n=t.default)==null?void 0:n.call(t)])}),{}}}),Se=$({__name:"MapsComponent",props:{maps:{type:Array,default:()=>[]}},setup(e){const l=e,t=G(()=>{const c=[...l.maps].sort((n,d)=>n.map_name.localeCompare(d.map_name)),a=3,u=[];for(let n=0;n<c.length;n+=a)u.push(c.slice(n,n+a));return u}),r=V(!1),m=V(""),_=c=>{m.value=c,r.value=!0},s=V({}),b=(c,a)=>{s.value[`${c}-${a}`]=!1},y=(c,a)=>{s.value[`${c}-${a}`]=!1,console.error(`Image failed to load at row ${c}, col ${a}`)};return J(()=>{t.value.forEach((c,a)=>{c.forEach((u,n)=>{s.value[`${a}-${n}`]=!0})})}),(c,a)=>(p(),k(C,null,[(p(!0),k(C,null,S(t.value,(u,n)=>(p(),h(N,{key:n},{default:i(()=>[(p(!0),k(C,null,S(u,(d,v)=>(p(),h(I,{key:v,cols:"4"},{default:i(()=>[o(w,null,{default:i(()=>[s.value[`${n}-${v}`]?(p(),h(Q,{key:0,type:"image",height:"200px"})):(p(),h(ce,{key:1,src:d.map_thumbnail,height:"200px",onLoad:f=>b(n,v),onError:f=>y(n,v)},null,8,["src","onLoad","onError"])),o(B,null,{default:i(()=>[g(L(d.map_name),1)]),_:2},1024),o(q,{class:"hover-pointer",onClick:f=>_(d.map_description)},{default:i(()=>[g(L(d.map_description),1)]),_:2},1032,["onClick"]),o(D,null,{default:i(()=>[g("Taille: "+L(d.map_size_display),1)]),_:2},1024),o(T,{class:"justify-center"},{default:i(()=>[o(A,{href:d.map_url,target:"_blank",color:"primary"},{default:i(()=>[o(de,null,{default:i(()=>a[2]||(a[2]=[g("mdi-download")])),_:1}),a[3]||(a[3]=g("Télécharger "))]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))),128)),o(Ee,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=u=>r.value=u),"max-width":"600"},{default:i(()=>[o(w,null,{default:i(()=>[o(B,null,{default:i(()=>a[4]||(a[4]=[g("Description de la carte")])),_:1}),o(D,null,{default:i(()=>[g(L(m.value),1)]),_:1}),o(T,null,{default:i(()=>[o(A,{color:"primary",onClick:a[0]||(a[0]=u=>r.value=!1)},{default:i(()=>a[5]||(a[5]=[g("Fermer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),$e=me(Se,[["__scopeId","data-v-7fa2b0d2"]]),Pe={key:0},we=$({__name:"MapsLoading",props:{enabled:{type:Boolean,default:!1}},setup(e){return(l,t)=>e.enabled?(p(),k("div",Pe,[(p(),k(C,null,S(4,r=>o(N,{key:r},{default:i(()=>[(p(),k(C,null,S(3,m=>o(I,{key:m,cols:"4"},{default:i(()=>[o(Q,{type:"image, list-item-two-line",height:"300",loading:!0})]),_:2},1024)),64))]),_:2},1024)),64))])):fe("",!0)}}),Be=$({__name:"MapsList",setup(e){const l=V(!0),t=V([]);return J(async()=>{try{const r=await Ve.getMapsList();t.value=r.data,console.log(pe(t.value))}catch(r){console.error("Failed to fetch maps:",r)}finally{l.value=!1}console.log(t.value)}),(r,m)=>{const _=we,s=$e;return p(),h(ke,null,{default:i(()=>[o(ve,null,{default:i(()=>[o(_,{enabled:l.value},null,8,["enabled"]),o(s,{maps:t.value},null,8,["maps"])]),_:1})]),_:1})}}}),ze=$({__name:"maps",setup(e){return(l,t)=>{const r=Be;return p(),h(r)}}});export{ze as default};
